if (self.CavalryLogger) { CavalryLogger.start_js(["uhKO5"]); }

__d("FBRTCParticipantCallState",[],(function(a,b,c,d,e,f){e.exports={UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12}}),null);
__d("MessengerView",[],(function(a,b,c,d,e,f){e.exports={DETAIL:{COMPOSE:"detail/compose",GALLERY:"detail/gallery",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SEE_ALL_GROUPS:"master/sagroups",SEE_ALL_PAGES:"master/sapages",SEE_ALL_PEOPLE:"master/sapeople",SEARCH:"master/search",SEARCH_MESSAGES:"master/search_messages",SUPPORT:"master/support"}}}),null);
__d("RTWebStrings",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={busy:g._("Kiireinen"),callAgain:g._("Soita uudelleen"),callEnded:g._("Puhelu p\u00e4\u00e4ttyi"),callFailed:g._("Soitto ep\u00e4onnistui"),callInterrupted:g._("Puhelu keskeytyi"),cannotConnect:g._("Puhelua ei voi yhdist\u00e4\u00e4"),chatLinksLeftVideoChat:g._("Poistuit ryhm\u00e4videokeskustelusta"),clientEncryptionError:g._("Asiakkaan salausvirhe"),close:g._("Sulje"),connected:g._("Yhteys muodostettu"),connecting:g._("Yhdistet\u00e4\u00e4n\u2026"),connectionDropped:g._("Yhteys katkesi"),connectionLost:g._("Yhteys katkesi"),contacting:g._("Yhdistet\u00e4\u00e4n\u2026"),copiedVideoChatLink:g._("Kopioitu"),copyVideoChatLink:g._("Kopioi videokeskustelun linkki"),disconnected:g._("Yhteys katkaistu"),dismiss:g._("Ohita"),hangingUp:g._("Puhelua katkaistaan\u2026"),inactive:g._("Puhelu ei ole aktiivinen"),inAnotherCall:g._("Toisessa puhelussa"),incomingVideoChat:g._("Saapuva videokeskustelu"),invalidStreamConfiguration:g._("Huoneessa on liikaa asiakkaita"),noAnswer:g._("Ei vastausta"),notNow:g._("Ei nyt"),participantLimitReached:g._("Osallistujam\u00e4\u00e4r\u00e4n yl\u00e4raja saavutettu"),pleaseWait:g._("Odota\u2026"),profilePictureAlt:g._("Profiilikuva"),reconnecting:g._("Yhdistet\u00e4\u00e4n uudelleen\u2026"),redial:g._("Soita uudelleen"),ringing:g._("Soittaa\u2026"),switchToWiFi:g._("Vaihda Wi-Fi-yhteyteen, jotta voit soittaa puhelun"),unreachable:g._("Ei tavoitettavissa"),userVideoOff:function(a){return g._("K\u00e4ytt\u00e4j\u00e4n {name} kamera ei ole k\u00e4yt\u00f6ss\u00e4",[g._param("name",a)])},viewerVideoOff:g._("Kamerasi ei ole k\u00e4yt\u00f6ss\u00e4"),waitingForOthers:g._("Odotetaan muiden liittymist\u00e4\u2026")};e.exports=a}),null);
__d("RTCUserRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({FBID:"UNDEFINED",isGuestUser:!1,isMessengerUser:!1,isPartiesUser:!1,lastConnectedAt:0,participantState:null,profilePictureUrl:null,profileUrl:null,roomLocation:null,screenStreams:b("immutable").Set(),streams:b("immutable").Set(),userName:"",userShortName:"",vanity:""});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);e.exports=c}),null);
__d("RTCUser",["FBRTCConstants","FBRTCParticipantCallState","RTCUserRecord","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").MediaContentTypes;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.clone=function(){return new c(this.toObject())};d.setParticipantState=function(a){return(!this.participantState||this.participantState.state!==b("FBRTCParticipantCallState").CONNECTED)&&a.state===b("FBRTCParticipantCallState").CONNECTED?this.set("participantState",a).set("lastConnectedAt",Date.now()):!this.participantState||this.participantState.state!==a.state?this.set("participantState",a):this};d.getParticipantState=function(){return this.participantState&&this.participantState.state};d.hasAudio=function(){return this.getAllStreamAudioTracks().some(function(a){return a.length>0})};d.hasVideo=function(){return this.streams.some(function(a){return a.getVideoTracks().length>0})};d.hasLiveVideoTracks=function(){return this.streams.some(function(a){return a.getVideoTracks().some(function(a){return a.readyState==="live"})})};d.isAudioMuted=function(){var a=this;return!this.hasAudio()?!0:this.getAllStreamAudioTracks().every(function(b){return a.areAllTracksMuted(b)})};d.isVideoMuted=function(){var a=this;return!this.hasVideo()?!0:this.streams.every(function(b){return a.areAllTracksMuted(b.getVideoTracks())})};d.areAllTracksMuted=function(a){return!a.some(function(a){return a.enabled})};d.hasFunctioningVideoTrack=function(){return!this.hasVideo()?!1:this.streams.every(function(a){return a.getVideoTracks().some(function(a){return a.enabled&&!a.muted})})};d.toggleMuteAudio=function(a){var b=this;this.getAllStreamAudioTracks().forEach(function(c){return b.$RTCUser1(c,a)});return this.clone()};d.toggleMuteVideo=function(a){var b=this;this.streams.forEach(function(c){b.$RTCUser1(c.getVideoTracks(),a)});return this.clone()};d.stopVideo=function(){var a=this;this.streams.forEach(function(b){b.getVideoTracks().forEach(function(c){a.$RTCUser1(b.getVideoTracks(),!0),c.readyState!=="ended"&&(c.onended&&c.onended(),c.stop())})});return this.clone()};d.getAllStreamAudioTracks=function(){return this.streams.concat(this.screenStreams).map(function(a){return a.getAudioTracks()})};d.hasStream=function(){return!this.streams.isEmpty()};d.addStream=function(a){return this.set("streams",this.streams.add(b("nullthrows")(a)))};d.removeStream=function(a){return this.set("streams",this.streams["delete"](a))};d.getStream=function(){return this.hasStream()?this.streams.first():null};d.getActiveStream=function(){return this.hasStream()?this.streams.find(function(a){return"active"in a&&a.active}):null};d.replaceStream=function(a,b){return!this.streams.contains(a)?this:this.set("streams",this.streams["delete"](a).add(b))};d.removeAllStreams=function(){return this.set("streams",b("immutable").Set())};d.getScreenStream=function(){return this.screenStreams&&this.hasScreenStream()?this.screenStreams.first():null};d.hasScreenStream=function(){return!this.screenStreams.isEmpty()};d.addScreenStream=function(a){return this.set("screenStreams",this.screenStreams.add(a))};d.removeScreenStream=function(a){return this.set("screenStreams",this.screenStreams["delete"](a))};d.removeAllScreenStreams=function(){return this.set("screenStreams",b("immutable").Set())};d.replaceScreenStream=function(a,b){if(!this.screenStreams.contains(a))return this;return a===b?this:this.set("screenStreams",this.screenStreams.add(b)["delete"](a))};d.setRoomLocation=function(a){return this.set("roomLocation",a)};d.getRoomLocation=function(){return this.roomLocation};d.$RTCUser1=function(a,b){var c=b!=null?!b:this.areAllTracksMuted(a);a.forEach(function(a){return a.enabled=c})};d.getMediaTypeForTracks=function(){var a=new Map(),b=this.getScreenStream();b&&b.getVideoTracks().forEach(function(b){return a.set(b.id,g.SCREEN)});return a};return c}(b("RTCUserRecord"));e.exports=a}),null);
__d("RTCCallTitle.react",["MercuryIDs","MercuryParticipantListRenderer","React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();var c=a.displayViewerName,d=a.viewer,e=a.participants;a=a.className;var f=b("MercuryIDs").getParticipantIDFromUserID(d);d=Object.keys(e.toJS());d.length>1&&(d=d.filter(function(a){return a!==f||c}));d=d.map(function(a){return e.get(a)});d=new(b("MercuryParticipantListRenderer"))().setUseShortName(!1).setUseAndSeparator(!1).renderParticipantList(d);return b("React").jsx("span",{className:a,children:d})};e.exports=a}),null);
__d("generateRTCCallID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("RTWebUserActionLogger",["CurrentUser","FBRTCConsoleLogger","FBRTCSupport","RTCWebUserActionsDebugTypedLogger","RTCWebUserActionsTypedLogger","RTWebLoggingSharedInstance","immutable","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").Map;a=function(){__p&&__p();function a(){this.$2=h(),this.$3=new Set(),this.$4=new Set(),this.$5=b("RTWebLoggingSharedInstance").getInstance().getDeviceID(),this.$6=this.$7(),this.clearCache()}var c=a.prototype;c.clearCache=function(){this.$1={callID:void 0,callType:void 0,mediaType:void 0,conferenceName:void 0,conferenceState:void 0}};c.logImpression=function(a){this.logEvent(babelHelpers["extends"]({eventName:"impression"},a))};c.logPreCallImpression=function(a){this.clearCache(),this.logImpression(a)};c.logPreCallClick=function(a){this.clearCache(),this.logClick(a)};c.logClick=function(a){this.logEvent(babelHelpers["extends"]({eventName:"tap"},a))};c.logError=function(a){this.logEvent(babelHelpers["extends"]({eventName:"error"},a))};c.startTimer=function(a){var c=(g||(g=b("performanceNow")))();this.$2=this.$2.set(a,c);this.logCheckpoint({checkpoint:a+"_timerStart"});this.$8(a,{startTime:c})};c.logStopTimer=function(a){var b=a.checkpointName===void 0?a.timerName:a.checkpointName,c=a.event||{};c.timeElapsed=this.$9(a.timerName);this.logCheckpoint(babelHelpers["extends"]({checkpoint:b+"_timerEnd"},c));return c.timeElapsed};c.logCheckpoint=function(a){this.logEvent(babelHelpers["extends"]({eventName:"checkpoint"},a))};c.$10=function(a){return a===null||a===void 0};c.logEvent=function(a){__p&&__p();var b=this.$1;b.callID=this.$10(a.callID)?b.callID:a.callID;b.callType=a.callType||b.callType;b.conferenceState=a.conferenceState||b.conferenceState;b.conferenceName=this.$10(a.conferenceName)?b.conferenceName:a.conferenceName;b.isCaller=a.isCaller==null?b.isCaller:a.isCaller;b.mediaType=a.mediaType||b.mediaType;this.$11(a,b);b=this.$12(a,b);this.$8(a.eventName,b)};c.$12=function(a,c){var d=new(b("RTCWebUserActionsTypedLogger"))();d.setCallType(c.callType).setDeviceID(this.$5).setClientTime(Date.now()).setErrorDomain(a.errorDomain).setErrorType(a.errorType).setComponent(a.component).setConferenceState(c.conferenceState).setEvent(a.eventName).setMediaType(c.mediaType).setPage(this.$6).setCallID(c.callID).setConferenceName(c.conferenceName).setSurface(a.surface).setCheckpoint(a.checkpoint).setEventTimeElapsed(a.timeElapsed).setIsCaller(c.isCaller).setCodebaseVersion("Old Codebase").log();return d.getData()};c.$11=function(a,c){var d=new(b("RTCWebUserActionsDebugTypedLogger"))();d.setCallType(c.callType).setDeviceID(this.$5).setClientTime(Date.now()).setErrorDomain(a.errorDomain).setErrorType(a.errorType).setComponent(a.component).setConferenceState(c.conferenceState).setEvent(a.eventName).setMediaType(c.mediaType).setPage(this.$6).setCallID(c.callID).setConferenceName(c.conferenceName).setSurface(a.surface).setCheckpoint(a.checkpoint).setEventTimeElapsed(a.timeElapsed).setIsCaller(c.isCaller).setCodebaseVersion("Old Codebase").log();return d.getData()};c.getCallType=function(a,b){b===void 0&&(b=!1);if(a===null||a===void 0)return null;if(a)return"mw";else if(b)return"escalated";else return"p2p"};c.getAudioVideoComponent=function(a){return a===null||a===void 0?null:a?"audio_button":"video_button"};c.getMediaType=function(a,b){b===void 0&&(b=!1);if(b)return"escalated";else if(a)return"audio";else return"video"};c.logErrorOnceforDomain=function(a,b){this.$3.has(a)||(this.$3.add(a),this.logError({errorDomain:a,errorType:b.toString()}))};c.logCheckpointOnceForDomain=function(a){var b=a.checkpoint;this.$4.has(b)||(this.$4.add(b),this.logCheckpoint(a))};c.clearLoggedDomains=function(){this.$3.clear(),this.$4.clear()};c.getWebLoggerInfoFromStore=function(a){a=a.callInfo;var b=a.callID,c=a.conferenceName;a=a.conferenceState;return{callID:b,conferenceName:c,conferenceState:a}};c.$7=function(){__p&&__p();if(b("FBRTCSupport").isMobileDevice())return"mweb";else if(b("CurrentUser").isWorkUser())return"workplace";var a=window.location.hostname;if(a.search("facebook")!==-1)return"facebook";else if(a.search("messenger")!==-1)return"messenger_dot_com";return a};c.$9=function(a){var c=this.$2.get(a);if(c){this.$2=this.$2.remove(a);return parseInt((g||(g=b("performanceNow")))()-c,10)}return null};c.$8=function(a,c){a=a==null?"null":a;b("FBRTCConsoleLogger").getInstance().getLogHistory().log(a,JSON.stringify(c))};return a}();e.exports=new a()}),null);
__d("MessagingThreadEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActiveTimeMs=function(a){this.$1.active_time_ms=a;return this};c.setClientEventTimeMs=function(a){this.$1.client_event_time_ms=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setPageData=function(a){this.$1.page_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setScriptPath=function(a){this.$1.script_path=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setVC=function(a){this.$1.vc=a;return this};return a}();c={active_time_ms:!0,client_event_time_ms:!0,event:!0,page_data:!0,page_id:!0,script_path:!0,source:!0,thread_id:!0,vc:!0};e.exports=a}),null);
__d("MessengerStateProcessor",["MercuryIDs","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerParticipants.bs","MessengerURIConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={preprocess:function(a){__p&&__p();var c=a.activeThreadID;if(c){var d=b("MercuryIDs").getUserIDFromThreadID(c),e=d&&b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e&&e.type!=="event")a.threadKey=e.vanity||d;else if(d&&!e){e=b("MercuryIDs").getParticipantIDFromUserID(d);a.threadKey=b("MercuryVanityIDMap.bs").hasID(e)?b("MercuryVanityIDMap.bs").getVanity(e):d}else{e=b("MercuryThreadIDMap").get();d=e.getServerIDFromClientIDNow(c);a.threadKey=d||b("MercuryIDs").tokenize(c).value}}delete a.activeThreadID;return a},postprocess:function(a){var c=b("MercuryThreadIDMap").get(),d=g(a.threadKey),e;e=b("MercuryIDs").isValid(d)?d:c.getClientIDFromServerIDNow(d);if(!e){d=b("MessengerParticipants.bs").getIDFromVanityOrFBID(d);d&&(e=b("MercuryIDs").getThreadIDFromParticipantID(d))}e&&(a.activeThreadID=e,a.serverThreadID=c.getServerIDFromClientIDNow(e));delete a.threadKey;return a},supportInboxPostprocess:function(a){a.threadKey&&(a.activeThreadID=b("MercuryIDs").getThreadIDFromSupportInboxItemID(a.threadKey));delete a.threadKey;return a}};function g(a){return!a?null:a.startsWith(b("MessengerURIConstants").GROUP_PREFIX)?a.substr(b("MessengerURIConstants").GROUP_PREFIX.length):a}e.exports=a}),null);
__d("MessengerURISerializer",["CurrentEnvironment","MercuryFilters.bs","MercuryIDs","MessagingTag","MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase","gkx","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="/?$",i="/",j=function(a,c){a.setPath(b("CurrentEnvironment").facebookdotcom?b("MessengerURIConstants").FACEBOOK_PREFIX+c:c)},k=b("qex")._("1097094"),l=function(a,c){var d=a.getPath();b("CurrentEnvironment").facebookdotcom&&!d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)&&(c=b("MessengerURIConstants").FACEBOOK_PREFIX+c);a.setPath(a.getPath()+c)};a={serialize:function(a){__p&&__p();var c=new(g||(g=b("URI")))(b("WWWBase").uri);a=b("MessengerStateProcessor").preprocess(a);switch(a.masterView){case b("MessengerView").MASTER.PAYMENT:j(c,b("MessengerURIConstants").PAYMENT_PATH);break;case b("MessengerView").MASTER.PEOPLE:j(c,b("MessengerURIConstants").PEOPLE_PATH);break;case b("MessengerView").MASTER.SEARCH:j(c,b("MessengerURIConstants").SEARCH_PATH);break;case b("MessengerView").MASTER.SEARCH_MESSAGES:case b("MessengerView").MASTER.SEE_ALL_GROUPS:case b("MessengerView").MASTER.SEE_ALL_PAGES:case b("MessengerView").MASTER.SEE_ALL_PEOPLE:k&&j(c,b("MessengerURIConstants").SEARCH_PATH);break}switch(a.folder){case b("MessagingTag").OTHER:j(c,b("MessengerURIConstants").FILTERED_REQUESTS_PATH);break;case b("MessagingTag").ACTION_ARCHIVED:j(c,b("MessengerURIConstants").ARCHIVED_PATH);break;case b("MessagingTag").PENDING:j(c,b("MessengerURIConstants").MESSAGE_REQUESTS_PATH);break;case b("MessagingTag").MARKETPLACE_FOLDER:j(c,b("MessengerURIConstants").FOLDERS_PATH+"/"+a.folderKey);break}a.detailView===b("MessengerView").DETAIL.GALLERY?j(c,b("MessengerURIConstants").GALLERY_PATH):a.detailView===b("MessengerView").DETAIL.PAYTHREAD?(l(c,b("MessengerURIConstants").PAYMENT_PAY_PATH),a.threadKey&&c.addQueryData("id",a.threadKey)):a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER?l(c,b("MessengerURIConstants").PAYMENT_PAY_PATH):a.detailView===b("MessengerView").DETAIL.COMPOSE?l(c,b("MessengerURIConstants").COMPOSE_SUBPATH):a.threadKey?a.masterView===b("MessengerView").MASTER.PAYMENT?(j(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):l(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey):a.masterView===b("MessengerView").MASTER.PAYMENT?(j(c,""),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):l(c,"");a.extraQueryParams&&c.addQueryData(a.extraQueryParams);b("MercuryFilters.bs").isSupportedFilter(a.filter)&&c.addQueryData({filter:a.filter});if(a.query!=null)if(a.masterView===b("MessengerView").MASTER.SEE_ALL_PEOPLE||a.masterView===b("MessengerView").MASTER.SEE_ALL_GROUPS||a.masterView===b("MessengerView").MASTER.SEE_ALL_PAGES)c.addQueryData("t",a.seeAllType),c.addQueryData("sa",a.query);else if(k)a.masterView===b("MessengerView").MASTER.SEARCH?c.addQueryData("q",a.query):a.masterView===b("MessengerView").MASTER.SEARCH_MESSAGES&&c.addQueryData("qa",a.query);else{var d;c.addQueryData((d={},d[a.masterView===b("MessengerView").MASTER.SEARCH?"qa":"q"]=a.query,d))}a.threadIDs&&c.addQueryData({threadIDs:JSON.stringify(a.threadIDs)});a.mid&&c.addQueryData({mid:a.mid});return c},getNonMessengerState:function(){return{notMessenger:!0,filter:b("MercuryFilters.bs").all,folder:b("MessagingTag").INBOX,masterView:b("MessengerView").MASTER.RECENT}},deserialize:function(a){__p&&__p();var c={},d=a.getPath(),e=b("gkx")("997564"),f=new RegExp("^"+b("MessengerURIConstants").FACEBOOK_PREFIX+"(/|$)");if(b("CurrentEnvironment").facebookdotcom&&!(f.test(d)||e&&d=="/"))return this.getNonMessengerState();f=d.replace(b("MessengerURIConstants").FACEBOOK_PREFIX,"");var g;e=a.getQueryData();d=e.filter;a=e.mid;var i=e.q,j=e.qa,l=e.sa,o=e.t,p=e.threadIDs;e=babelHelpers.objectWithoutPropertiesLoose(e,["filter","mid","q","qa","sa","t","threadIDs"]);c.query=j||i;c.sa=l;c.seeAllType=o;if(p)try{g=JSON.parse(p)}catch(a){}g?c.threadIDs=g.filter(function(a){return b("MercuryIDs").isValidThreadID(a)}):c.threadIDs=null;f.match("^"+b("MessengerURIConstants").PEOPLE_PATH)?c.masterView=b("MessengerView").MASTER.PEOPLE:f.match("^"+b("MessengerURIConstants").PAYMENT_PATH)?c.masterView=b("MessengerView").MASTER.PAYMENT:f.match("^"+b("MessengerURIConstants").SEARCH_PATH)?k?c.masterView=this.updateMasterViewForSearchRefactor(j,l,o):c.masterView=b("MessengerView").MASTER.SEARCH:c.masterView=b("MessengerView").MASTER.RECENT;f.match("^"+b("MessengerURIConstants").FILTERED_REQUESTS_PATH)?c.folder=b("MessagingTag").OTHER:f.match("^"+b("MessengerURIConstants").ARCHIVED_PATH)?c.folder=b("MessagingTag").ACTION_ARCHIVED:f.match("^"+b("MessengerURIConstants").MESSAGE_REQUESTS_PATH)?c.folder=b("MessagingTag").PENDING:f.match("^"+b("MessengerURIConstants").FOLDERS_PATH)?c.folder=b("MessagingTag").MARKETPLACE_FOLDER:c.folder=b("MessagingTag").INBOX;if(f.match(b("MessengerURIConstants").COMPOSE_SUBPATH+h))c.detailView=b("MessengerView").DETAIL.COMPOSE;else if(f.match("^"+b("MessengerURIConstants").PAYMENT_PATH+b("MessengerURIConstants").PAYMENT_PAY_PATH))e&&e.id?(c.threadKey=e.id,c.detailView=b("MessengerView").DETAIL.PAYTHREAD):c.detailView=b("MessengerView").DETAIL.PAYFRIENDPICKER;else{i=m(f);i&&(c.threadKey=i,c.detailView=b("MessengerView").DETAIL.THREAD);p=n(f);p&&(c.folderKey=p)}b("MercuryFilters.bs").isSupportedFilter(d)?c.filter=d:c.filter=b("MercuryFilters.bs").all;c.mid=a;c.extraQueryParams=e;if(c.masterView===b("MessengerView").MASTER.SUPPORT)return b("MessengerStateProcessor").supportInboxPostprocess(c);f.match("^"+b("MessengerURIConstants").GALLERY_PATH)&&(c.detailView=b("MessengerView").DETAIL.GALLERY);return b("MessengerStateProcessor").postprocess(c)},updateMasterViewForSearchRefactor:function(a,c,d){if(a)return b("MessengerView").MASTER.SEARCH_MESSAGES;else if(c&&d)switch(d){case"friend":case"non_friend":return b("MessengerView").MASTER.SEE_ALL_PEOPLE;case"page":return b("MessengerView").MASTER.SEE_ALL_PAGES;case"thread":return b("MessengerView").MASTER.SEE_ALL_GROUPS;default:return b("MessengerView").MASTER.SEARCH}else return b("MessengerView").MASTER.SEARCH}};function m(a){a=a.match(b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+h);return a&&decodeURIComponent(a[1])}function n(a){a=a.match(b("MessengerURIConstants").FOLDERS_PATH+i+"([^/]+)"+b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+h);return a&&decodeURIComponent(a[1])}e.exports=a}),null);
__d("WorkGalahadChatChannelActions",["MercuryFilters.re","MessagingTag","WorkGalahadDispatcher"],(function(a,b,c,d,e,f){"use strict";function a(a){b("WorkGalahadDispatcher").dispatch({type:"galahad/chat_change_folder",folder:a})}function c(a){b("WorkGalahadDispatcher").dispatch({type:"galahad/chat_change_filter",filter:a})}e.exports={changeFolder:a,changeFilter:c}}),null);
__d("MessengerActions",["invariant","Bootloader","EventProfiler","LogHistory","MercuryIDs","MessengerDispatcher","MessengerThreadFetchLoggerUtil","MessengerURISerializer","MessengerView","URI","WorkGalahadChatChannelActions","WorkGalahadSettings","goURI","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("keyMirror")({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),j=b("LogHistory").getInstance("messenger_actions"),k={Types:i,changeDetailView:function(a){m(function(b){return b.detailView!==a?{detailView:a}:null})},changeMasterView:function(a){m(function(c){if(c.masterView!==a){var d={masterView:a};c.masterView===b("MessengerView").MASTER.SEARCH&&(d.query=void 0,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){a&&a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions"));return d}return null})},selectThread:function(a,c){__p&&__p();if(c==="meeting_room_page"){n(a);return}b("EventProfiler").tagCurrentActiveInteractionsAs("MessengerThreadSwitch");b("MessengerDispatcher").dispatch({type:i.SELECT_THREAD,threadID:a});m(function(c){if(c.activeThreadID===a)return null;var d={query:c.query,activeThreadID:a,detailView:b("MessengerView").DETAIL.THREAD,mid:null};a&&(b("MessengerThreadFetchLoggerUtil").markerStart(a),c.query!==void 0&&c.masterView!==b("MessengerView").MASTER.SEARCH&&c.masterView!==b("MessengerView").MASTER.SEARCH_MESSAGES&&(d.query=void 0,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){if(!a&&!b)return;a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_BY_CHANGING_THREADS)},"MessengerActions")));return d})},changeState:function(a){b("MessengerDispatcher").dispatch({type:i.REPLACE_STATE,nextState:a})},changeMDotMeReferral:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:k.Types.UPDATE_MDOT_ME,refCode:a,refThreadID:c})},changeThreadTag:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:k.Types.UPDATE_THREAD_TAG,messagingTags:a,threadID:c})},changeFolder:function(a,c){b("WorkGalahadSettings").isGalahadEnabled?b("WorkGalahadChatChannelActions").changeFolder(a):m(function(b){return b.folder!==a?c?{folder:a,folderKey:c}:{folder:a}:null})},changeFilter:function(a){b("WorkGalahadSettings").isGalahadEnabled?b("WorkGalahadChatChannelActions").changeFilter(a):m(function(b){return b.filter!==a?{filter:a}:null})},changeMid:function(a){m(function(b){return b.mid!==a?{mid:a}:null})},changeID:function(a){m(function(b){return b.extraQueryParams.id!==a?{extraQueryParams:babelHelpers["extends"]({},b.extraQueryParams,{id:a})}:null})},prepareFilesForSend:function(a,c,d){j.debug("Add files from "+d,a);if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.PREPARE_FILES_FOR_SEND,threadID:a,files:c})},uploadedFile:function(a,c,d){if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.UPLOADED_FILE,threadID:a,uploadID:c,payload:d})},cancelFileUpload:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.CANCEL_FILE_UPLOAD,threadID:a,uploadID:c})},uploadFileFailed:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.UPLOAD_FILE_FAILED,threadID:a,uploadID:c})},cleanFiles:function(a){j.debug("clean files",a);if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.EMPTY_FILES,threadID:a})},loadingPreview:function(a,c){b("MessengerDispatcher").dispatch({type:k.Types.LINK_PREVIEW,threadID:a,match:c})},loadingShareData:function(a){b("MessengerDispatcher").dispatch({type:k.Types.LOADING_SHARE_DATA,threadID:a})},loadedShareData:function(a,c){b("MessengerDispatcher").dispatch({type:k.Types.LOADED_SHARE_DATA,threadID:a,attachmentData:c})},removeSharePreview:function(a){b("MessengerDispatcher").dispatch({type:k.Types.REMOVE_SHARE_PREVIEW,threadID:a})}};function l(a,b){return a.detailView==null}function m(a){var c=b("MessengerURISerializer").deserialize(new(h||(h=b("URI")))(window.location.href));a=a(c);var d=l(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}function n(a){!a&&g(0,5146);a=b("MercuryIDs").getUserIDFromThreadID(a);!a&&g(0,5147);var c=new(h||(h=b("URI")))(),d=c.getQualifiedURI().getSubdomain();c.setDomain("facebook.com").setSubdomain(d).setPath("/"+a).setProtocol("https");window.open(c,"_blank")}e.exports=k}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","MessengerDispatcher","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("MessengerStore",["MessengerDispatcher","mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=b("MessengerDispatcher").register(this.__onDispatch.bind(this))}var c=a.prototype;c.getDispatchToken=function(){return this.$1};c.emitChange=function(){this.emit("change")};c.destroy=function(){b("MessengerDispatcher").unregister(this.$1)};return a}();b("mixInEventEmitter")(a,{change:!0});e.exports=a}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerDotComSettingsInitialData","MessengerSettingsActions","MessengerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("CacheStorage"))("localstorage"),h="desktopNotifsEnabled";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:c.$MessengerSettingsStore2()});c.$MessengerSettingsStore1.privacy_section_collapsed=!0;return c}var d=c.prototype;d.getSettings=function(){return this.$MessengerSettingsStore1};d.$MessengerSettingsStore2=function(){return g.get(h,!1)};d.$MessengerSettingsStore3=function(a){g.set(h,a)};d.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MessengerLoggerUtils",["MercuryIDs","MessagingThreadEventTypedLogger","ScriptPath","pageID"],(function(a,b,c,d,e,f){a={logThreadChangeEvent:function(a,b,c,d){c.activeThreadID&&a&&this.log({activeThreadID:c.activeThreadID,event:"inactive",clientEventTimeMs:b,activeTimeMs:b-a}),d.activeThreadID&&this.log({activeThreadID:d.activeThreadID,event:"active",clientEventTimeMs:b,activeTimeMs:0})},log:function(a){var c=b("MercuryIDs").tokenize(a.activeThreadID.toString()),d=b("ScriptPath").getPageInfo();new(b("MessagingThreadEventTypedLogger"))().setEvent(a.event).setClientEventTimeMs(a.clientEventTimeMs).setActiveTimeMs(a.activeTimeMs).setPageID(b("pageID")).setPageData(d?d.extraData:{}).setThreadID(c.value).setSource("messenger").log()}};e.exports=a}),null);
__d("MessengerURIStore",["LogHistory","MessengerActions","MessengerLoggerUtils","MessengerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("messenger_uri_store");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerURIStore1={activeThreadID:null,folderKey:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,sa:null,seeAllType:null,serverThreadID:null,extraQueryParams:null};b.$MessengerURIStore2=babelHelpers["extends"]({},b.$MessengerURIStore1);b.$MessengerURIStore4=b.$MessengerURIStore3=null;return b}var d=c.prototype;d.getState=function(){return this.$MessengerURIStore1};d.getPrevState=function(){return this.$MessengerURIStore2};d.__onDispatch=function(a){__p&&__p();switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:this.$MessengerURIStore2=this.$MessengerURIStore1;this.$MessengerURIStore4=this.$MessengerURIStore3;this.$MessengerURIStore1=babelHelpers["extends"]({activeThreadID:null,folderKey:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,sa:null,seeAllType:null,serverThreadID:null,extraQueryParams:null,threadsIDs:null},a.nextState);a=Date.now();this.$MessengerURIStore3=a;g.debug("replace_state",JSON.stringify({previousThreadID:this.$MessengerURIStore2.activeThreadID,nextThreadID:this.$MessengerURIStore1.activeThreadID}));b("MessengerLoggerUtils").logThreadChangeEvent(this.$MessengerURIStore4,a,this.$MessengerURIStore2,this.$MessengerURIStore1);this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MessengerBrowserAlerts",["fbt","Bootloader","CurrentUser","DocumentTitle","Event","FavIcon","ImageSourceRequest","ImageSourceType","MercuryAttachmentSnippetRenderer","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryNotificationRenderer","MercuryThreadInfo","MercuryThreadInformer","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerFaviconUrls","MessengerParticipants.bs","MessengerSettingsStore","MessengerState.bs","MessengerURIStore","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=8e3,i=80,j=3,k=6e5,l=new Map(),m=null,n=null;function o(){l=new Map()}function p(a){var c=b("MessengerSettingsStore").getSettings().sound_enabled,d=a.action_type=="ma-type:log-message";d=d&&(a.log_message_type=="log:phone-call"||a.log_message_type=="log:video-call")&&a.log_message_data.answered;c&&!d&&b("Sound").play([b("MessengerConfig")["sound.notif_ogg_url"],b("MessengerConfig")["sound.notif_mp3_url"]],a.timestamp,!1)}function q(a,c,d){__p&&__p();if(!a.snippet_sender)return;var e=l.get(a.thread_id)||0;if(e>=j)return;l.set(a.thread_id,e+1);b("MessengerParticipants.bs").get(a.snippet_sender,function(e){var f=a.snippet,h=a.custom_nickname&&a.custom_nickname[b("MercuryIDs").getUserIDFromParticipantID(e.id)],i=h?h:e.short_name;!f&&a.snippet_attachments&&a.snippet_attachments.length>0&&(f=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(a.snippet_attachments),!1,i,a.snippet_attachments));h=h?h:e.name;a.is_canonical||(h=a.name?g._("{sender's name} \u2013 {group name}",[g._param("sender's name",i),g._param("group name",a.name)]):g._("{sender's name} ryhm\u00e4llesi",[g._param("sender's name",i)]));b("MessengerDesktopNotifications").showNotification({title:h,body:f,icon:a.image_src||c||e.big_image_src||e.image_src,closeTime:null,onClick:function(){window.focus(),b("MessengerActions").selectThread(a.thread_id)},tag:d.message_id,silent:!b("MessengerSettingsStore").getSettings().sound_enabled});b("MessengerDesktopNotifications").hasDefaultSound()||p(d)})}a={_shouldUpdateTitle:!0,init:function(a){__p&&__p();var c=this;this._viewer=a;this._threadInformer=b("MercuryThreadInformer").getForFBID(this._viewer);this._highResImageMap=new Map();this._shouldMarkAllAsSeenWhenActive=!0;this._shouldUpdateFavicon=!0;this._enabled=!0;b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){c._availabilityStatusStore=a},"MessengerBrowserAlerts"));b("Event").listen(window,"focus",function(){o(),clearInterval(m)});b("Event").listen(window,"blur",function(){m=setInterval(o,k)});this._threadInformer.subscribe("messages-received",function(a,b){for(var d in b)b[d].forEach(function(a){c.handleMessageReceived(a)})});this._threadInformer.subscribe("unseen-updated",this._handleUnseenUpdated.bind(this));this._threadInformer.subscribe("unread-updated",this._handleUnseenUpdated.bind(this))},disable:function(){this._enabled=!1},enable:function(){this._enabled=!0},disableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!1},enableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!0},disableFaviconUpdate:function(){this._shouldUpdateFavicon=!1},disableTitleUpdate:function(){this._shouldUpdateTitle=!1},enableTitleUpdate:function(){this._shouldUpdateTitle=!0},handleMessageReceived:function(a){__p&&__p();var c=this;if(!this._enabled)return;var d=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(d||a.author===this._viewer||!a.is_unread||a.thread_id===b("MessengerURIStore").getState().activeThreadID&&b("UserActivity").isOnTab()||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;b("MessengerState.bs").getThreadMeta(this._viewer,a.thread_id,function(d){__p&&__p();if(b("MercuryThreadInfo").isMuted(d))if(!b("MercuryThreadInfo").areMentionsMuted(d)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===c._viewer}))return}else return;var e=b("CurrentUser").getID();b("MessengerState.bs").compute(e,function(f){f=f.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(e,f,d))return;b("MessengerSettingsStore").getSettings().desktopNotifsEnabled&&!b("UserActivity").isOnTab()?c._attemptDesktopNotification(d,a):a.log_message_type!=="log:unsubscribe"&&p(a);!b("UserActivity").isOnTab()&&b("MessengerState.bs").getUnseenUnreadCount(c._viewer)>0&&b("MercuryNotificationRenderer").renderDocumentTitle(a.thread_id,function(a){!n&&c._shouldUpdateTitle&&(n=b("DocumentTitle").blink(a))})})})},showRTCNotification:function(a,c){__p&&__p();var d=this;if(b("UserActivity").isOnTab()){c(null);return}var e=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(e){c(null);return}this._highResImageMap||(this._highResImageMap=new Map());var f=a.peerID;if(!this._highResImageMap.has(f)){e=function(b,e){d._highResImageMap.set(f.toString(),e.uri),d._displayRTCDesktopNotification(e.uri,a,c)};new(b("ImageSourceRequest"))().setFBID(f).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode("p").setCallback(e.bind(null,f)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(f),a,c)},_updateFavicon:function(a){if(!this._shouldUpdateFavicon)return;a===0?b("FavIcon").set(b("MessengerFaviconUrls")["default"]):b("FavIcon").set(b("MessengerFaviconUrls").unread)},_displayRTCDesktopNotification:function(a,c,d){__p&&__p();var e=b("MercuryIDs").getParticipantIDFromUserID(c.peerID);b("MessengerParticipants.bs").get(e,function(f){var i;c.isVideoCall?c.isGroupCall?i=g._("Saapuva ryhm\u00e4videokeskustelu"):i=g._("Saapuva videopuhelu"):c.isGroupCall?i=g._("Saapuva ryhm\u00e4puhelu"):i=g._("Saapuva puhelu");f=g._("{caller} soittaa. Vastaa klikkaamalla.",[g._param("caller",f.short_name)]);e=b("MessengerDesktopNotifications").showNotification({title:i,body:f,icon:a,closeTime:h,onShow:function(){b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logPreCallImpression({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),surface:"desktop_notification",component:"accept_button"})},"MessengerBrowserAlerts")},onClick:function(){window.focus(),b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logPreCallClick({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),surface:"desktop_notification",component:"accept_button"})},"MessengerBrowserAlerts"),c.onNotificationClicked()}});d(e)})},_handleUnseenUpdated:function(){__p&&__p();var a=this;if(!this._enabled)return;var c=b("MessengerState.bs").getUnseenUnreadCount(this._viewer);if(this._shouldMarkAllAsSeenWhenActive&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&c>0){this._updateFavicon(0);b("MessengerState.bs").markAsSeen(this._viewer);return}this._shouldUpdateTitle&&b("DocumentTitle").badge(c);this._updateFavicon(c);n&&c===0&&(n.stop(),n=null);this._shouldMarkAllAsSeenWhenActive&&!this._focusToken&&c>0&&(this._focusToken=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(a._focusToken&&a._focusToken.unsubscribe(),a._focusToken=null,b("MessengerState.bs").markAsSeen(a._viewer))}))},_attemptDesktopNotification:function(a,c){var d=this;if(!a.snippet_sender)return;if(!this._highResImageMap.has(a.snippet_sender)){var e=function(b,e){d._highResImageMap.set(a.snippet_sender,e.uri),q(a,e.uri,c)};new(b("ImageSourceRequest"))().setFBID(b("MercuryIDs").getUserIDFromParticipantID(a.snippet_sender)).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode("p").setCallback(e.bind(null,a.snippet_sender)).send()}else q(a,this._highResImageMap.get(a.snippet_sender),c)}};e.exports=a}),null);
__d("MessengerDialogLayerShrinkOnHide",["cx","invariant","CSSFade","Layer","SubscriptionsHandler","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._layer=a,this._subscriptionsHandler=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.enable=function(){this._subscription=this._layer.subscribe("starthide",this._handleStartHide.bind(this))};c.disable=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._subscriptionsHandler.release()};c._handleStartHide=function(){__p&&__p();var a=!0,c=b("Layer").subscribe("show",function(){var b;(b=c)==null?void 0:b.unsubscribe();a=!1}),d=b("setTimeout")(function(){var b=this,d;(d=c)==null?void 0:d.unsubscribe();c=null;d=function(){b._layer.finishHide()};a?this._animate(d):d()}.bind(this),0);this._subscriptionsHandler.addSubscriptions({remove:function(){b("clearTimeout")(d)}});return!1};c._animate=function(a){var c=this._layer.getRoot();c!=null||h(0,70);var d=c.getElementsByClassName("_59s7");d&&d[0]&&d[0].classList.add("_2qby");b("CSSFade").hide(c,{callback:function(){a()},duration:200})};return a}();e.exports=a}),null);
__d("MessengerDialog.react",["cx","LayerHideOnEscape","MessengerDialogLayerShrinkOnHide","MessengerDialogs.bs","React","XUIDialog.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerDialog",propTypes:{label:a.node,onToggle:a.func,repositionOnUpdate:a.bool,shown:a.bool,type:a.oneOf(["alert","default"]),width:a.number,removeDialogOnToggle:a.bool},getDefaultProps:function(){return{label:void 0,repositionOnUpdate:!1,shown:!0,type:"alert",width:400,removeDialogOnToggle:!0}},componentDidUpdate:function(){this.props.repositionOnUpdate&&setTimeout(function(){this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer&&this.refs.dialog.layer.updatePosition()}.bind(this),0)},handleToggle:function(a){this.props.onToggle&&this.props.onToggle(a),!a&&this.props.removeDialogOnToggle&&b("MessengerDialogs.bs").removeDialog()},render:function(){return b("React").jsx(b("XUIDialog.react"),babelHelpers["extends"]({behaviors:{MessengerDialogLayerShrinkOnHide:b("MessengerDialogLayerShrinkOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")}},this.props,{onToggle:this.handleToggle,className:b("joinClasses")("_4ebx",this.props.className),ref:"dialog",children:b("React").jsx("div",{className:"_4eby"+(this.props.type==="alert"?" _2c9g":"")+(this.props.type==="default"?" _2c9i":""),children:this.props.children})}))}});e.exports=c}),null);
__d("MessengerDialogBody.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx("div",{className:b("joinClasses")("_4eb-",this.props.className),children:this.props.children})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerButtonReact.bs",["cx","bs_curry","React","LinkReact.bs","bs_caml_option","ReasonReact.bs","joinClasses","bs_js_null_undefined"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c,d){if(a){d.preventDefault();return 0}else if(c!==void 0)return b("bs_curry")._1(c,d);else return 0}function i(a){if(a!==void 0)return{color:a}}function j(a,c,d,e,f){c="_3quh _30yy"+(c===0?" _2t_":"")+(c===1?" _2u0":"")+(c===2?" _17u4":"")+(f===1?" _3ay_":"")+(d?" _4zab":"")+(e?" _fy2":"");if(a!==void 0)return b("joinClasses")(c,a);else return c}function a(a){__p&&__p();var c=a.ariaLabel,d=a.ariaHidden,e=a.role,f=a.tabIndex,g=a.target,k=a.onClick,l=a.disabled,m=l!==void 0?l:!1;l=a.className;var n=a.color,o=a.customColor;o=o!==void 0?o:!1;var p=a.label,q=a.type,r=a.use;r=r!==void 0?r:0;var s=a.href,t=a.wrapperClassName;t=t!==void 0?t:"";a=a.dataTestID;var u=function(a){return h(m,k,a)};l=j(l,q,m,o,r);q=i(n);if(s!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,d,c,l,void 0,void 0,void 0,void 0,void 0,s,void 0,u,void 0,void 0,e,void 0,q,f,g,void 0,p));else{o=b("joinClasses")("_30vt",t);r={className:l,onClick:u};d!==void 0&&(r["aria-hidden"]=b("bs_caml_option").valFromOption(d));c!==void 0&&(r["aria-label"]=b("bs_caml_option").valFromOption(c));e!==void 0&&(r.role=b("bs_caml_option").valFromOption(e));q!==void 0&&(r.style=b("bs_caml_option").valFromOption(q));f!==void 0&&(r.tabIndex=b("bs_caml_option").valFromOption(f));g!==void 0&&(r.target=b("bs_caml_option").valFromOption(g));n=b("React").createElement("button",r,p);s=b("React").cloneElement(n,{"data-testid":b("bs_js_null_undefined").fromOption(a)});return b("React").createElement("span",{className:o},s)}}c=a;f.handleLinkClick=h;f.elementStyle=i;f.interactionElementClassName=j;f.make=c}),null);
__d("MessengerButtonReact.re",["react","MessengerButtonReact.bs"],(function(a,b,c,d,e,f){var g,h={primary:0,secondary:1,faded:2},i={"default":0,danger:1};(function(a){return null});a=function(a){a={type:h[a.type],ariaHidden:a.ariaHidden,ariaLabel:a.ariaLabel,className:a.className,color:a.color,customColor:a.customColor,dataTestID:a.dataTestID,disabled:a.disabled,href:a.href,label:a.label,onClick:a.onClick,role:a.role,tabIndex:a.tabIndex,target:a.target,use:a.use==null?void 0:i[a.use],wrapperClassName:a.wrapperClassName};a=(g||(g=b("react"))).createElement(b("MessengerButtonReact.bs").make,a);return a};f.make=a}),null);
__d("MessengerDialogButton.react",["cx","MessengerButtonReact.re","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerButtonReact.re").make;a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.action,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["action","className"]);return b("React").jsx(h,babelHelpers["extends"]({className:b("joinClasses")(d,"_5ixy"+(c==="button"?" layerButton":"")+(c==="cancel"?" layerCancel":"")+(c==="confirm"?" layerConfirm":""))},a))};return c}(b("React").PureComponent);c.propTypes={action:a.oneOf(["button","cancel","confirm"])};e.exports=c}),null);
__d("MessengerDialogFooter.react",["cx","LeftRight.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsx("div",{className:b("joinClasses")("_4eb_",this.props.className),children:a.jsxs(b("LeftRight.react"),{children:[a.jsx("div",{className:"_2_d1",children:this.props.leftContent}),a.jsx("div",{children:this.props.children})]})})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerMenu.react",["cx","Keys","MenuSeparator.react","MessengerDotComAndInboxM4Check.bs","ReactXUIMenu","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a.isReactLegacyFactory={},a.type=a}c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d=c.className;c=babelHelpers.objectWithoutPropertiesLoose(c,["className"]);return a.call(this,babelHelpers["extends"]({className:b("joinClasses")(d,"_2i-c"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6_n0":"")+" _150g")},c))||this}var d=c.prototype;d.handleKeydown=function(c,d){return c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").SPACE?a.prototype.handleKeydown.call(this,c,d):!0};return c}(b("ReactXUIMenu"));a(c);c.Item=b("ReactXUIMenu").Item;c.Separator=b("MenuSeparator.react");e.exports=c}),null);
__d("MessengerSpinnerReact.bs",["cx","ix","fbt","Image.bs","React","ReasonReact.bs","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h("86853"),k=h("86857"),l=h("86854");c=b("ReasonReact.bs").statelessComponent("MessengerSpinnerReact");function m(a){__p&&__p();var c=a.className,d=c!==void 0?c:"";c=a.color;var e=c!==void 0?c:"blue";c=a.size;var f=c!==void 0?c:24;c=a.center;a=c!==void 0?c:!1;var g=function(a){a=f===24;if(a){a=e==="blue";if(a)return j;else return k}else return l};c=function(a){return b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(b("joinClasses")(d,"_3u55 _3qh2"),void 0,i._("Ladataan\u2026"),!0,g(0),f,void 0,f,void 0,[]))};if(a)return b("React").createElement("div",{className:"_8a6k"},c(0));else return c(0)}function a(a){var b=a.className,c=a.color,d=a.size;a=a.center;return m({className:b==null?"":b,color:c==null?"blue":c,size:d==null?24:d,center:a==null?!1:a})}d=32;e=24;g=m;f.large_size=d;f.medium_size=e;f.blue_src=j;f.grey_src=k;f.large_blue_src=l;f.component=c;f.make=g;f.jsComponent=a}),null);
__d("MessengerSpinner.react",["MessengerSpinnerReact.bs"],(function(a,b,c,d,e,f){e.exports=b("MessengerSpinnerReact.bs").jsComponent,e.exports.large_size=b("MessengerSpinnerReact.bs").large_size,e.exports.medium_size=b("MessengerSpinnerReact.bs").medium_size}),null);
__d("MessengerDialogHeaderReact.bs",["cx","React","bs_caml_option","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.autofocus;c=c!==void 0?c:!1;var d=a.id;a=a.children;a={children:a,className:b("joinClasses")("_4ebz",c?"autofocus":"")};d!==void 0&&(a.id=b("bs_caml_option").valFromOption(d));return b("React").jsx("h2",a)}c=a;f.make=c}),null);
__d("MessengerDialogHeaderReact.re",["MessengerDialogHeaderReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerDialogHeaderReact.bs").make;f.make=a}),null);
__d("MessengerDialogTitleReact.bs",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.autofocus;c=c!==void 0?c:!1;a=a.children;return b("React").jsx("div",{children:a,className:b("joinClasses")("_19jt",c?"autofocus":"")})}c=a;f.make=c}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_FROM_INTEGRATED_MESSAGE_SEARCH:"search_from_integrated_message_search",SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads"});c=Object.freeze(babelHelpers["extends"]({},b,{END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button",END_BY_CHANGING_THREADS:"end_by_changing_threads"}));e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:c,ENTRY_SURFACES:b}}),null);
__d("MessengerRTCGroupCallContactListItem.react",["cx","fbt","ix","FBRTCParticipantCallState","Image.react","Link.react","MessengerContactImageReact.bs","React","RTWebStrings","emptyFunction"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerContactImageReact.bs").jsComponent,k=(a={},a[(c=b("FBRTCParticipantCallState")).DISCONNECTED]=(d=b("RTWebStrings")).disconnected,a[c.NO_ANSWER]=d.noAnswer,a[c.REJECTED]=d.noAnswer,a[c.UNREACHABLE]=d.unreachable,a[c.CONNECTION_DROPPED]=d.connectionDropped,a[c.CONTACTING]=d.contacting,a[c.RINGING]=d.ringing,a[c.CONNECTING]=d.connecting,a[c.CONNECTED]=d.connected,a[c.PARTICIPANT_LIMIT_REACHED]=d.participantLimitReached,a[c.IN_ANOTHER_CALL]=d.inAnotherCall,a),l=32;f=function(a){var c=a.isSelected,d=a.onClick,e=a.user,f=a.dataTestID;a=a.participantState;return b("React").jsxs(b("Link.react"),{"aria-checked":c,className:"_4nvn",onClick:o(a)?b("emptyFunction"):d,"data-testid":f,role:"checkbox",children:[b("React").jsx(j,{className:"_4nvr",isMessengerUser:e.isMessengerUser,isPartiesUser:e.isPartiesUser,size:l,src:e.profilePictureUrl}),b("React").jsxs("div",{className:"_4nvs",children:[b("React").jsxs("div",{className:"_4nvt",children:[b("React").jsx("div",{className:"_4nv_",children:e.userName}),b("React").jsx(m,{user:e,participantState:a})]}),b("React").jsx(n,{isSelected:c,participantState:a})]})]})};var m=function(a){var c=a.user;a=a.participantState;if(a){a=k[a.state]||h._("Tuntematon");return b("React").jsx("div",{className:"_4nw0",children:a})}return c.vanity?b("React").jsxs("div",{className:"_4nw0",children:["@",c.vanity]}):null},n=function(a){var c=a.isSelected;a=a.participantState;if(o(a))return b("React").jsx("div",{className:"_1j79",children:h._("Puhelussa")});else if(c)return b("React").jsx("div",{className:"_1j79",children:b("React").jsx(b("Image.react"),{src:i("86852")})});return null};function o(a){if(!a)return!1;switch(a.state){case b("FBRTCParticipantCallState").CONTACTING:case b("FBRTCParticipantCallState").RINGING:case b("FBRTCParticipantCallState").CONNECTING:case b("FBRTCParticipantCallState").CONNECTED:return!0;default:return!1}}e.exports=f}),null);
__d("MessengerRTCGroupCallContactList.react",["cx","MessengerRTCGroupCallContactListItem.react","MessengerScrollableArea.react","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.isParticipantSelected,d=a.onClick,e=a.remoteUsers;a=a.participantStates;var f=a===void 0?b("immutable").Map():a;a=e.map(function(a){return b("React").jsx(b("MessengerRTCGroupCallContactListItem.react"),{isSelected:c.get(a.FBID),onClick:function(){return d(a.FBID)},user:a,dataTestID:"RTCPickerDialogContactListItem"+a.FBID,participantState:f.get(a.FBID)},a.FBID)});return b("React").jsx(b("MessengerScrollableArea.react"),{className:"_12zw",children:a})};e.exports=a}),null);
__d("MessengerRTCGroupCallThreadRow.react",["cx","fbt","MercuryParticipantsImage.react","MercuryThreadTitle_DEPRECATED.react","MessengerProfileImageWrapperReact.bs","MessengerThreadImageReact.bs","React","RTCCallTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerProfileImageWrapperReact.bs").jsComponent,j=b("MessengerThreadImageReact.bs").jsComponent,k=function(){return b("React").jsx("div",{className:"_1apf",children:h._("Ryhm\u00e4videoon lis\u00e4\u00e4m\u00e4si ihmiset n\u00e4kev\u00e4t viestiketjun aiemmat viestit.")})},l=function(){return b("React").jsx("div",{className:"_1ydy",children:h._("Soitat est\u00e4millesi ihmisille.")})};a=function(a){var c=a.thread,d=a.displayAddMemberWarning,e=a.displayBlockedMemberWarning,f=a.participants,g=a.viewerID;babelHelpers.objectWithoutPropertiesLoose(a,["thread","displayAddMemberWarning","displayBlockedMemberWarning","participants","viewerID"]);return b("React").jsxs("div",{className:"_5y31",children:[c&&c.image_src?b("React").jsx(j,{className:"_5y32",participants:f,thread:c,viewer:g}):b("React").jsx(i,{className:"_5y32",showBadge:!1,children:b("React").jsx(b("MercuryParticipantsImage.react"),{participants:Object.keys(f.toJS()),size:50})}),b("React").jsxs("div",{className:"_5y34",children:[c&&c.name?b("React").jsx(b("MercuryThreadTitle_DEPRECATED.react"),{className:"_5y37",thread:c,viewer:g}):b("React").jsx(b("RTCCallTitle.react"),{className:"_5y37",participants:f,viewer:g}),d?b("React").jsx(k,{}):null,e?b("React").jsx(l,{}):null]})]})};e.exports=a}),null);
__d("MessengerSearchActions",["MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("keyMirror")({ENTER_UNIVERSAL_SEARCH:null,ENTER_MESSAGE_SEARCH:null,ENTER_SEE_ALL_SEARCH:null,EXIT_MESSAGE_SEARCH:null,EXIT_SEE_ALL_SEARCH:null,LOAD_MORE_RESULTS:null}),i=b("qex")._("1097094")?b("MessengerView").MASTER.SEARCH_MESSAGES:b("MessengerView").MASTER.SEARCH,j={Types:h,changeQuery:function(a){l(function(b){return b.query!==a?{query:a}:null})},changeQuerySeeAll:function(a,c){l(function(d){if(d.queryAll!==a)switch(c){case"message":return{query:a,masterView:i};case"friend":case"non_friend":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PEOPLE,seeAllType:c};case"page":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PAGES,seeAllType:c};case"thread":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_GROUPS,seeAllType:c}}return null})},changeQueryAll:function(a){l(function(b){return b.queryAll!==a?{query:a,masterView:i}:null})},searchForMessagesInAThread:function(a,b){var c={query:b,serverThreadID:a,activeThreadID:a,masterView:i};l(function(a){return c})},loadMoreResults:function(){b("MessengerDispatcher").dispatch({type:h.LOAD_MORE_RESULTS})},enterUniversalSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_UNIVERSAL_SEARCH}),l(function(a){return{masterView:b("MessengerView").MASTER.SEARCH}})},enterMessageSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_MESSAGE_SEARCH})},enterSeeAllSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_SEE_ALL_SEARCH})},exitMessageSearch:function(){j.changeQueryAll(""),b("MessengerDispatcher").dispatch({type:j.Types.EXIT_MESSAGE_SEARCH})},exitSeeAllSearch:function(){j.changeQuerySeeAll(null,null),b("MessengerDispatcher").dispatch({type:j.Types.EXIT_SEE_ALL_SEARCH})}};function k(a,b){return a.detailView==null}function l(a){var c=b("MessengerURISerializer").deserialize(new(g||(g=b("URI")))(window.location.href));a=a(c);var d=k(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}e.exports=j}),null);
__d("XMessengerDotComLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logout/",{next:{type:"String"}})}),null);